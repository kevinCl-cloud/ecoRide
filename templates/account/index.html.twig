{% extends 'base.html.twig' %}

{% block body %}
	<main class="flex-fill">
		<section class="hero-others-pages">
			<div class="hero-inner container">
				<h3 class="display-6 fw-bold mb-2 hero-slogan">Voyagez Ecoresponsable</h3>
				<p class="mb-3 hero-slogan">Partagez vos trajets, Economisez et protégez la planète</p>
			</div>
		</section>

		<div class="search-bar-wrapper">
			{% include 'search_bar.html.twig' %}
		</div>

		<div class="container my-5">
			<div class="text-center my-4">
				<h2 class="titre-page">Espace personnel</h2>
				<p>
					Bienvenue sur votre espace personnel,
					<span class="eco fw-bold text-capitalize">{{ app.user.firstName }}</span>
					! Voici votre tableau de bord personnel sur
					<span class="eco fw-bold">Eco</span>
					<span class="ride">Ride</span>.
				</p>
			</div>
			<div class="row justify-content-center">
				<div class="col-md-12 col-lg-6">
					<div
						class="card shadow-lg p-3 border-0">
						<!-- photo + pseudo utilisateur -->
						<div class="py-2 px-3rounded border-bottom d-flex gap-3 align-items-center justify-content-between carte-utilisateur">
							<div class="d-flex  align-items-center gap-2">
								<div class=" photo">
									<img class="photo-utilisateur" src="{{ asset("assets/images/photo1.png") }}" alt="photo profile utilisateur"></img>
							</div>
							<div class="pseudo utilisateur text-center">
								<h4>
									{{ app.user.pseudo}}
								</h4>
							</div>
						</div>
						<!-- lien modifier les informations -->
						<a class="btn btn-sm px-3 btn-ecoride" href="#">
							Modifier mes informations
						</a>
					</div>

					<div
						class="d-flex align-items-center gap-2 mt-3">

						<!-- Passager : toujours actif -->
						<button type="button" class="btn btn-outline-success p-2 active" disabled>
							Passager
						</button>

						<!-- devenir Chauffeur -->
						{% if app.user.isDriver %}
							<button type="button" class="btn btn-success btn-ecoride ">
								Chauffeur activé
							</button>

							<!-- Nouveau bouton créer trajet -->
							<a href="{{ path('app_make_covoiturage') }}" class="btn btn-ecoride px-3">
								+ Créer un trajet
							</a>
						{% else %}
							<a class="btn btn-sm p-2 btn-ecoride" href="{{ path('app_driver') }}">
								Devenir chauffeur
							</a>
						{% endif %}

					</div>

					{% if app.user.isDriver and app.user.vehicules|length > 0 %}

						<div class="p-3 border-0 mt-4">
							<div class="d-flex justify-content-between align-items-center mb-3">
								<h6 class="mb-0">Mon véhicule</h6>
							</div>

							{% for vehicule in app.user.vehicules %}
								<div
									class="card shadow-sm border-0 mb-3 carte-vehicule">

									<!-- Header véhicule -->
									<div class="d-flex justify-content-between align-items-center px-3 py-2 border-bottom">
										<div>
											<h6 class="mb-0 fw-bold">
												{{ vehicule.idBrand.libel }}
												{{ vehicule.model }}
											</h6>
											<small class="text-muted">
												{{ vehicule.color }}
												•
												{{ vehicule.energy }}
											</small>
										</div>

										<span class="badge bg-success px-3 py-2 btn-ecoride">
											{{ vehicule.placesNbr }}
											places
										</span>
									</div>

									<div class="row text-center py-3">

										<div class="col-4 border-end">
											<small class="text-muted d-block">Marque</small>
											<span class="fw-semibold">{{ vehicule.idBrand.libel }}</span>
										</div>

										<div class="col-4 border-end">
											<small class="text-muted d-block">Modèle</small>
											<span class="fw-semibold">{{ vehicule.model }}</span>
										</div>

										<div class="col-4">
											<small class="text-muted d-block">Énergie</small>
											<span class="fw-semibold">{{ vehicule.energy }}</span>
										</div>

									</div>

								</div>

							{% endfor %}
						</div>

					{% endif %}
				</div>

				<div
					class="card my-3 shadow-lg p-3 border-0">
					<!-- Affichage des covoiturages -->
					<div class="gap-3 my-3 d-flex align-items-center justify-content-between">
						<div class="p-3">
							<h6>
								Mes Reservations
							</h6>
						</div>
						<a href="#" class="lien px-2">
							Voir toutes mes reservations
						</a>
					</div>
					<!-- liste des reservations -->
					<div class="gap-3 mx-3 carte-chauffeur">
						<div class=" border-bottom px-3 pt-2 rounded d-flex gap-3 align-items-center justify-content-between">
							<div class=" mh-50 d-flex align-items-center gap-3">
								<div class="photo ms-2">
									<img class="photo-chauffeur" src="{{ asset("assets/images/photo1.png") }}" alt="photo profile utilisateur"></img>
							</div>
							<div class="text-center pe-2">
								<h5>
									{{ app.user.name}}
								</h5>
								<p>⭐ 5
								</p>
							</div>
						</div>

						<!-- Affichage infos covoiturage -->
						<div
							class="col-md-6 d-flex justify-content-center align-items-center gap-4">
							<!-- Départ -->
							<div class="d-flex flex-column text-center">
								<span class="fw-semibold">10:00</span>
								<span class="text-muted">Paris</span>
							</div>
							<!-- Durée -->
							<div class="text-center">
								<span>----- 6H -----</span>
							</div>
							<!-- Arrivée -->
							<div class="d-flex flex-column text-center">
								<span class="fw-semibold">16:00</span>
								<span class="text-muted">Marseille</span>
							</div>

						</div>
					</div>

					<!-- Affichage infos reservations-->
					<div class="p-3 d-flex justify-content-between">
						<div class="text-center">
							<span>lundi 23 juillet</span>
						</div>
						<div class="text-center">
							<span>places disponible</span>
						</div>
						<div class="text-center">
							<span>voyage écologique</span>
						</div>
					</div>

				</div>
			</div>


			<div
				class="card my-3 shadow-lg p-3 border-0">
				<!-- Affichage des covoiturages -->
				<div class="gap-3 my-3 d-flex align-items-center justify-content-between">
					<div class="p-3">
						<h6>
							Mes Covoiturages
						</h6>
					</div>
					<a href="#" class="lien px-2">
						Voir tous mes covoiturages
					</a>
				</div>
				<!-- liste des covoiturages -->
				<div class="gap-3 mx-3 carte-chauffeur">
					<div class=" border-bottom px-3 pt-2 rounded d-flex gap-3 align-items-center justify-content-between">
						<div class=" mh-50 d-flex align-items-center gap-3">
							<div class="photo ms-2">
								<img class="photo-chauffeur" src="{{ asset("assets/images/photo1.png") }}" alt="photo profile utilisateur"></img>
						</div>
						<div class="text-center pe-2">
							<h5>
								{{ app.user.name}}
							</h5>
							<p>⭐ 5
							</p>
						</div>
					</div>

					<!-- Affichage infos covoiturage -->
					<div
						class="col-md-6 d-flex justify-content-center align-items-center gap-4">
						<!-- Départ -->
						<div class="d-flex flex-column text-center">
							<span class="fw-semibold">10:00</span>
							<span class="text-muted">Paris</span>
						</div>
						<!-- Durée -->
						<div class="text-center">
							<span>----- 6H -----</span>
						</div>
						<!-- Arrivée -->
						<div class="d-flex flex-column text-center">
							<span class="fw-semibold">16:00</span>
							<span class="text-muted">Marseille</span>
						</div>

					</div>
				</div>

				<!-- Affichage infos reservations-->
				<div class="p-3 d-flex justify-content-between">
					<div class="text-center">
						<span>lundi 23 juillet</span>
					</div>
					<div class="text-center">
						<span>places disponible</span>
					</div>
					<div class="text-center">
						<span>voyage écologique</span>
					</div>
				</div>

			</div>
		</div>
	</main>
{% endblock %}
